define(["./core","./var/document","./var/documentElement","./var/rnothtmlwhite","./var/slice","./data/var/dataPriv","./core/init","./selector"],function(e,t,n,r,i,o){"use strict";function l(){return!0}function c(){return!1}function f(){try{return t.activeElement}catch(e){}}function p(t,n,r,i,o,s){var a,u;if("object"==typeof n){"string"!=typeof r&&(i=i||r,r=void 0);for(u in n)p(t,u,r,i,n[u],s);return t}if(null==i&&null==o?(o=r,i=r=void 0):null==o&&("string"==typeof r?(o=i,i=void 0):(o=i,i=r,r=void 0)),o===!1)o=c;else if(!o)return t;return 1===s&&(a=o,o=function(t){return e().off(t),a.apply(this,arguments)},o.guid=a.guid||(a.guid=e.guid++)),t.each(function(){e.event.add(this,n,o,i,r)})}var s=/^key/,a=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,u=/^([^.]*)(?:\.(.+)|)/;return e.event={global:{},add:function(t,i,s,a,l){var c,f,p,h,d,g,m,v,$,y,b,w=o.get(t);if(w)for(s.handler&&(c=s,s=c.handler,l=c.selector),l&&e.find.matchesSelector(n,l),s.guid||(s.guid=e.guid++),(h=w.events)||(h=w.events={}),(f=w.handle)||(f=w.handle=function(n){return"undefined"!=typeof e&&e.event.triggered!==n.type?e.event.dispatch.apply(t,arguments):void 0}),i=(i||"").match(r)||[""],d=i.length;d--;)p=u.exec(i[d])||[],$=b=p[1],y=(p[2]||"").split(".").sort(),$&&(m=e.event.special[$]||{},$=(l?m.delegateType:m.bindType)||$,m=e.event.special[$]||{},g=e.extend({type:$,origType:b,data:a,handler:s,guid:s.guid,selector:l,needsContext:l&&e.expr.match.needsContext.test(l),namespace:y.join(".")},c),(v=h[$])||(v=h[$]=[],v.delegateCount=0,m.setup&&m.setup.call(t,a,y,f)!==!1||t.addEventListener&&t.addEventListener($,f)),m.add&&(m.add.call(t,g),g.handler.guid||(g.handler.guid=s.guid)),l?v.splice(v.delegateCount++,0,g):v.push(g),e.event.global[$]=!0)},remove:function(t,n,i,s,a){var l,c,f,p,h,d,g,m,v,$,y,b=o.hasData(t)&&o.get(t);if(b&&(p=b.events)){for(n=(n||"").match(r)||[""],h=n.length;h--;)if(f=u.exec(n[h])||[],v=y=f[1],$=(f[2]||"").split(".").sort(),v){for(g=e.event.special[v]||{},v=(s?g.delegateType:g.bindType)||v,m=p[v]||[],f=f[2]&&new RegExp("(^|\\.)"+$.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=l=m.length;l--;)d=m[l],!a&&y!==d.origType||i&&i.guid!==d.guid||f&&!f.test(d.namespace)||s&&s!==d.selector&&("**"!==s||!d.selector)||(m.splice(l,1),d.selector&&m.delegateCount--,g.remove&&g.remove.call(t,d));c&&!m.length&&(g.teardown&&g.teardown.call(t,$,b.handle)!==!1||e.removeEvent(t,v,b.handle),delete p[v])}else for(v in p)e.event.remove(t,v+n[h],i,s,!0);e.isEmptyObject(p)&&o.remove(t,"handle events")}},dispatch:function(t){var r,i,s,a,u,l,n=e.event.fix(t),c=new Array(arguments.length),f=(o.get(this,"events")||{})[n.type]||[],p=e.event.special[n.type]||{};for(c[0]=n,r=1;r<arguments.length;r++)c[r]=arguments[r];if(n.delegateTarget=this,!p.preDispatch||p.preDispatch.call(this,n)!==!1){for(l=e.event.handlers.call(this,n,f),r=0;(a=l[r++])&&!n.isPropagationStopped();)for(n.currentTarget=a.elem,i=0;(u=a.handlers[i++])&&!n.isImmediatePropagationStopped();)(!n.rnamespace||n.rnamespace.test(u.namespace))&&(n.handleObj=u,n.data=u.data,s=((e.event.special[u.origType]||{}).handle||u.handler).apply(a.elem,c),void 0!==s&&(n.result=s)===!1&&(n.preventDefault(),n.stopPropagation()));return p.postDispatch&&p.postDispatch.call(this,n),n.result}},handlers:function(t,n){var r,i,o,s,a,u=[],l=n.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||c.disabled!==!0)){for(s=[],a={},r=0;l>r;r++)i=n[r],o=i.selector+" ",void 0===a[o]&&(a[o]=i.needsContext?e(o,this).index(c)>-1:e.find(o,this,null,[c]).length),a[o]&&s.push(i);s.length&&u.push({elem:c,handlers:s})}return c=this,l<n.length&&u.push({elem:c,handlers:n.slice(l)}),u},addProp:function(t,n){Object.defineProperty(e.Event.prototype,t,{enumerable:!0,configurable:!0,get:e.isFunction(n)?function(){return this.originalEvent?n(this.originalEvent):void 0}:function(){return this.originalEvent?this.originalEvent[t]:void 0},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[e.expando]?t:new e.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&e.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return e.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},e.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},e.Event=function(t,n){return this instanceof e.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?l:c,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,n&&e.extend(this,n),this.timeStamp=t&&t.timeStamp||e.now(),void(this[e.expando]=!0)):new e.Event(t,n)},e.Event.prototype={constructor:e.Event,isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},e.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&s.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&a.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},e.event.addProp),e.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var r,i=this,o=t.relatedTarget,s=t.handleObj;return(!o||o!==i&&!e.contains(i,o))&&(t.type=s.origType,r=s.handler.apply(this,arguments),t.type=n),r}}}),e.fn.extend({on:function(e,t,n,r){return p(this,e,t,n,r)},one:function(e,t,n,r){return p(this,e,t,n,r,1)},off:function(t,n,r){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,e(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,n,t[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=void 0),r===!1&&(r=c),this.each(function(){e.event.remove(this,t,r,n)})}}),e});
