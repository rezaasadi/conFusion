define(["./core","./core/access","./data/var/dataPriv","./data/var/dataUser"],function(e,t,n,r){"use strict";function s(e){return"true"===e?!0:"false"===e?!1:"null"===e?null:e===+e+""?+e:i.test(e)?JSON.parse(e):e}function a(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(o,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n=s(n)}catch(a){}r.set(e,t,n)}else n=void 0;return n}var i=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,o=/[A-Z]/g;return e.extend({hasData:function(e){return r.hasData(e)||n.hasData(e)},data:function(e,t,n){return r.access(e,t,n)},removeData:function(e,t){r.remove(e,t)},_data:function(e,t,r){return n.access(e,t,r)},_removeData:function(e,t){n.remove(e,t)}}),e.fn.extend({data:function(i,o){var s,u,l,c=this[0],f=c&&c.attributes;if(void 0===i){if(this.length&&(l=r.get(c),1===c.nodeType&&!n.get(c,"hasDataAttrs"))){for(s=f.length;s--;)f[s]&&(u=f[s].name,0===u.indexOf("data-")&&(u=e.camelCase(u.slice(5)),a(c,u,l[u])));n.set(c,"hasDataAttrs",!0)}return l}return"object"==typeof i?this.each(function(){r.set(this,i)}):t(this,function(e){var t;if(c&&void 0===e){if(t=r.get(c,i),void 0!==t)return t;if(t=a(c,i),void 0!==t)return t}else this.each(function(){r.set(this,i,e)})},null,o,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){r.remove(this,e)})}}),e});
