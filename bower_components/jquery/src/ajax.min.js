define(["./core","./var/document","./var/rnothtmlwhite","./ajax/var/location","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseXML","./event/trigger","./deferred","./serialize"],function(e,t,n,r,i,o){"use strict";function v(t){return function(r,i){"string"!=typeof r&&(i=r,r="*");var o,s=0,a=r.toLowerCase().match(n)||[];if(e.isFunction(i))for(;o=a[s++];)"+"===o[0]?(o=o.slice(1)||"*",(t[o]=t[o]||[]).unshift(i)):(t[o]=t[o]||[]).push(i)}}function $(t,n,r,i){function a(u){var l;return o[u]=!0,e.each(t[u]||[],function(e,t){var u=t(n,r,i);return"string"!=typeof u||s||o[u]?s?!(l=u):void 0:(n.dataTypes.unshift(u),a(u),!1)}),l}var o={},s=t===d;return a(n.dataTypes[0])||!o["*"]&&a("*")}function y(t,n){var r,i,o=e.ajaxSettings.flatOptions||{};for(r in n)void 0!==n[r]&&((o[r]?t:i||(i={}))[r]=n[r]);return i&&e.extend(!0,t,i),t}function b(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function w(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(f){return{state:"parsererror",error:s?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}var s=/%20/g,a=/#.*$/,u=/([?&])_=[^&]*/,l=/^(.*?):[ \t]*([^\r\n]*)$/gm,c=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,f=/^(?:GET|HEAD)$/,p=/^\/\//,h={},d={},m="*/".concat("*"),g=t.createElement("a");return g.href=r.href,e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:r.href,type:"GET",isLocal:c.test(r.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":m,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,n){return n?y(y(t,e.ajaxSettings),n):y(e.ajaxSettings,t)},ajaxPrefilter:v(h),ajaxTransport:v(d),ajax:function(c,v){function H(t,n,r,i){var o,s,a,u,l,c=n;k||(k=!0,E&&window.clearTimeout(E),y=void 0,C=i||"",L.readyState=t>0?4:0,o=t>=200&&300>t||304===t,r&&(u=b(j,L,r)),u=w(j,u,L,o),o?(j.ifModified&&(l=L.getResponseHeader("Last-Modified"),l&&(e.lastModified[x]=l),l=L.getResponseHeader("etag"),l&&(e.etag[x]=l)),204===t||"HEAD"===j.type?c="nocontent":304===t?c="notmodified":(c=u.state,s=u.data,a=u.error,o=!a)):(a=c,(t||!c)&&(c="error",0>t&&(t=0))),L.status=t,L.statusText=(n||c)+"",o?I.resolveWith(D,[s,c,L]):I.rejectWith(D,[L,c,a]),L.statusCode(P),P=void 0,A&&M.trigger(o?"ajaxSuccess":"ajaxError",[L,j,o?s:a]),R.fireWith(D,[L,c]),A&&(M.trigger("ajaxComplete",[L,j]),--e.active||e.event.trigger("ajaxStop")))}"object"==typeof c&&(v=c,c=void 0),v=v||{};var y,x,C,S,E,T,k,A,N,O,j=e.ajaxSetup({},v),D=j.context||j,M=j.context&&(D.nodeType||D.jquery)?e(D):e.event,I=e.Deferred(),R=e.Callbacks("once memory"),P=j.statusCode||{},V={},q={},F="canceled",L={readyState:0,getResponseHeader:function(e){var t;if(k){if(!S)for(S={};t=l.exec(C);)S[t[1].toLowerCase()]=t[2];t=S[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return k?C:null},setRequestHeader:function(e,t){return null==k&&(e=q[e.toLowerCase()]=q[e.toLowerCase()]||e,V[e]=t),this},overrideMimeType:function(e){return null==k&&(j.mimeType=e),this},statusCode:function(e){var t;if(e)if(k)L.always(e[L.status]);else for(t in e)P[t]=[P[t],e[t]];return this},abort:function(e){var t=e||F;return y&&y.abort(t),H(0,t),this}};if(I.promise(L),j.url=((c||j.url||r.href)+"").replace(p,r.protocol+"//"),j.type=v.method||v.type||j.method||j.type,j.dataTypes=(j.dataType||"*").toLowerCase().match(n)||[""],null==j.crossDomain){T=t.createElement("a");try{T.href=j.url,T.href=T.href,j.crossDomain=g.protocol+"//"+g.host!=T.protocol+"//"+T.host}catch(_){j.crossDomain=!0}}if(j.data&&j.processData&&"string"!=typeof j.data&&(j.data=e.param(j.data,j.traditional)),$(h,j,v,L),k)return L;A=e.event&&j.global,A&&0===e.active++&&e.event.trigger("ajaxStart"),j.type=j.type.toUpperCase(),j.hasContent=!f.test(j.type),x=j.url.replace(a,""),j.hasContent?j.data&&j.processData&&0===(j.contentType||"").indexOf("application/x-www-form-urlencoded")&&(j.data=j.data.replace(s,"+")):(O=j.url.slice(x.length),j.data&&(x+=(o.test(x)?"&":"?")+j.data,delete j.data),j.cache===!1&&(x=x.replace(u,"$1"),O=(o.test(x)?"&":"?")+"_="+i++ +O),j.url=x+O),j.ifModified&&(e.lastModified[x]&&L.setRequestHeader("If-Modified-Since",e.lastModified[x]),e.etag[x]&&L.setRequestHeader("If-None-Match",e.etag[x])),(j.data&&j.hasContent&&j.contentType!==!1||v.contentType)&&L.setRequestHeader("Content-Type",j.contentType),L.setRequestHeader("Accept",j.dataTypes[0]&&j.accepts[j.dataTypes[0]]?j.accepts[j.dataTypes[0]]+("*"!==j.dataTypes[0]?", "+m+"; q=0.01":""):j.accepts["*"]);for(N in j.headers)L.setRequestHeader(N,j.headers[N]);if(j.beforeSend&&(j.beforeSend.call(D,L,j)===!1||k))return L.abort();if(F="abort",R.add(j.complete),L.done(j.success),L.fail(j.error),y=$(d,j,v,L)){if(L.readyState=1,A&&M.trigger("ajaxSend",[L,j]),k)return L;j.async&&j.timeout>0&&(E=window.setTimeout(function(){L.abort("timeout")},j.timeout));try{k=!1,y.send(V,H)}catch(_){if(k)throw _;H(-1,_)}}else H(-1,"No Transport");return L},getJSON:function(t,n,r){return e.get(t,n,r,"json")},getScript:function(t,n){return e.get(t,void 0,n,"script")}}),e.each(["get","post"],function(t,n){e[n]=function(t,r,i,o){return e.isFunction(r)&&(o=o||i,i=r,r=void 0),e.ajax(e.extend({url:t,type:n,dataType:o,data:r,success:i},e.isPlainObject(t)&&t))}}),e});
